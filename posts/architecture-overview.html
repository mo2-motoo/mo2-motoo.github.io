<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Motoo 프로젝트 아키텍처 개요 - Motoo Tech Blog</title>
    <meta
      name="description"
      content="마이크로서비스 아키텍처를 기반으로 한 Motoo 프로젝트의 전체적인 시스템 구조와 설계 원칙에 대해 알아봅니다."
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-brand">
          <a href="/">
            <i class="fas fa-rocket"></i>
            <span>Motoo Tech</span>
          </a>
        </div>
        <div class="nav-menu">
          <a href="/" class="nav-link">홈</a>
          <a href="/architecture" class="nav-link active">아키텍처</a>
          <a href="/domain" class="nav-link">도메인</a>
          <a href="/implementation" class="nav-link">구현</a>
          <a href="/testing" class="nav-link">테스트</a>
          <a href="/troubleshooting" class="nav-link">문제해결</a>
        </div>
        <div class="nav-toggle">
          <i class="fas fa-bars"></i>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <div class="container">
        <!-- Post Header -->
        <header class="post-header">
          <div class="post-meta">
            <span class="post-category">시스템 아키텍처</span>
            <span class="post-date">2025년 8월 13일</span>
          </div>
          <h1 class="post-title">Motoo 프로젝트 아키텍처 개요</h1>
          <p class="post-excerpt">
            마이크로서비스 아키텍처를 기반으로 한 Motoo 프로젝트의 전체적인
            시스템 구조와 설계 원칙에 대해 알아봅니다.
          </p>
          <div class="post-tags">
            <span class="tag">system-design</span>
            <span class="tag">microservices</span>
            <span class="tag">overview</span>
          </div>
        </header>

        <!-- Post Content -->
        <article class="post-content">
          <section class="content-section">
            <h2>📋 프로젝트 개요</h2>
            <p>
              Motoo는 한국투자증권 API를 활용한 주식 투자 플랫폼으로, 실시간
              주식 시세 수집, 주문 매칭, 포트폴리오 관리, 그리고 투자 성과
              분석을 제공하는 종합적인 투자 시스템입니다.
            </p>
            <p>
              본 프로젝트는 마이크로서비스 아키텍처를 기반으로 설계되어 확장성과
              유지보수성을 고려한 현대적인 시스템 구조를 채택하고 있습니다.
            </p>
          </section>

          <section class="content-section">
            <h2>🏗️ 전체 시스템 아키텍처</h2>
            <p>Motoo 시스템은 다음과 같은 계층 구조로 구성되어 있습니다:</p>

            <div class="architecture-diagram">
              <h3>시스템 아키텍처 다이어그램</h3>
              <div class="diagram-container">
                <div class="diagram-layer">
                  <h4>Presentation Layer</h4>
                  <div class="component">React Frontend</div>
                  <div class="component">API Gateway</div>
                </div>
                <div class="diagram-layer">
                  <h4>Application Layer</h4>
                  <div class="component">User Service</div>
                  <div class="component">Stock Service</div>
                  <div class="component">Order Service</div>
                  <div class="component">Portfolio Service</div>
                  <div class="component">Execution Service</div>
                  <div class="component">Token Service</div>
                </div>
                <div class="diagram-layer">
                  <h4>Data Layer</h4>
                  <div class="component">PostgreSQL</div>
                  <div class="component">Redis</div>
                </div>
                <div class="diagram-layer">
                  <h4>External APIs</h4>
                  <div class="component">한국투자증권 API</div>
                </div>
              </div>
            </div>
          </section>

          <section class="content-section">
            <h2>🔧 핵심 컴포넌트 설명</h2>

            <h3>Application Services (docker-compose.yml)</h3>
            <ul>
              <li>
                <strong>backend</strong>: 메인 애플리케이션 서비스로, 프로젝트
                루트의 Dockerfile에서 빌드됩니다. db와 redis 서비스에 의존하며
                포트 8080에서 실행됩니다.
              </li>
              <li>
                <strong>db</strong>: PostgreSQL 15 데이터베이스 서비스로, 주요
                데이터 저장소 역할을 합니다. 포트 5432를 노출하며 postgres_data
                볼륨에 데이터를 저장합니다.
              </li>
              <li>
                <strong>redis</strong>: Redis 7 서비스로, 캐싱과 메시지 큐
                용도로 사용됩니다. 포트 6379를 노출하며 redis_data 볼륨에
                데이터를 저장합니다.
              </li>
              <li>
                <strong>redis-cli</strong>: Redis 서버와 상호작용하기 위한 Redis
                클라이언트 서비스로, 주로 디버깅과 수동 작업을 위해 사용됩니다.
              </li>
            </ul>

            <h3>Monitoring Services (docker-compose.monitoring.yml)</h3>
            <ul>
              <li>
                <strong>prometheus</strong>: 다양한 익스포터에서 메트릭을
                수집하는 모니터링 및 알림 도구킷입니다. 포트 9090에서
                실행됩니다.
              </li>
              <li>
                <strong>grafana</strong>: Prometheus에서 수집한 메트릭과 Loki의
                로그를 시각화하는 분석 플랫폼입니다. 포트 3001에서 실행됩니다.
              </li>
              <li>
                <strong>cadvisor</strong>: 실행 중인 컨테이너에 대한 정보를
                수집, 집계, 처리하고 내보내는 컨테이너 어드바이저입니다. 포트
                8081에서 실행됩니다.
              </li>
              <li>
                <strong>postgres-exporter</strong>: PostgreSQL 데이터베이스에서
                Prometheus용 메트릭을 수집하는 익스포터입니다.
              </li>
              <li>
                <strong>k6</strong>: 애플리케이션의 성능 테스트를 위한 부하
                테스트 도구입니다.
              </li>
              <li>
                <strong>node-exporter</strong>: *NIX 커널에서 노출하는 하드웨어
                및 OS 메트릭을 위한 익스포터입니다.
              </li>
              <li>
                <strong>redis-exporter</strong>: Redis 메트릭을 Prometheus용으로
                수집하는 익스포터입니다.
              </li>
            </ul>

            <h3>Logging Services (docker-compose.logging.yml)</h3>
            <ul>
              <li>
                <strong>loki</strong>: 모든 서비스의 로그를 저장하고 쿼리하기
                위한 로그 집계 시스템입니다. 포트 3100에서 실행됩니다.
              </li>
              <li>
                <strong>promtail</strong>: 로컬 로그의 내용을 개인 Loki
                인스턴스로 전송하는 에이전트입니다.
              </li>
              <li>
                <strong>grafana</strong>: 모니터링 설정과 동일한 Grafana
                인스턴스로, Loki의 로그를 시각화하는 데에도 사용됩니다. 포트
                3000에서 실행됩니다.
              </li>
            </ul>
          </section>

          <section class="content-section">
            <h2>📊 시스템 데이터 플로우</h2>

            <h3>주식 거래 플로우</h3>
            <div class="flow-diagram">
              <div class="flow-steps">
                <div class="flow-step">
                  <div class="step-number">1</div>
                  <div class="step-content">
                    <h4>사용자 주문</h4>
                    <p>매수/매도 주문 생성</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">2</div>
                  <div class="step-content">
                    <h4>주문 검증</h4>
                    <p>잔고 및 주문 유효성 검증</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">3</div>
                  <div class="step-content">
                    <h4>주문 매칭</h4>
                    <p>가격-시간 우선순위 매칭</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">4</div>
                  <div class="step-content">
                    <h4>체결 처리</h4>
                    <p>체결 내역 생성 및 저장</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">5</div>
                  <div class="step-content">
                    <h4>포트폴리오 업데이트</h4>
                    <p>보유 주식 및 현금 잔고 업데이트</p>
                  </div>
                </div>
              </div>
            </div>

            <h3>시세 데이터 수집 플로우</h3>
            <div class="flow-diagram">
              <div class="flow-steps">
                <div class="flow-step">
                  <div class="step-number">1</div>
                  <div class="step-content">
                    <h4>스케줄러 실행</h4>
                    <p>정기적 데이터 수집 트리거</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">2</div>
                  <div class="step-content">
                    <h4>한국투자증권 API 호출</h4>
                    <p>실시간 시세 데이터 요청</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">3</div>
                  <div class="step-content">
                    <h4>데이터 저장</h4>
                    <p>1분봉, 1시간봉, 1일봉 저장</p>
                  </div>
                </div>
                <div class="flow-arrow">→</div>
                <div class="flow-step">
                  <div class="step-number">4</div>
                  <div class="step-content">
                    <h4>데이터 집계</h4>
                    <p>상위 단위 데이터 집계</p>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <section class="content-section">
            <h2>🛡️ 시스템 보안 및 안정성</h2>

            <h3>데이터 보안</h3>
            <ul>
              <li>
                <strong>API 토큰 보안</strong>: 한국투자증권 API 토큰을 안전하게
                저장하고 자동으로 갱신합니다.
              </li>
              <li>
                <strong>환경 변수 관리</strong>: 민감한 설정 정보를 환경 변수로
                분리하여 관리합니다.
              </li>
              <li>
                <strong>데이터 검증</strong>: 입력 데이터의 유효성을 검사하고
                SQL Injection을 방지합니다.
              </li>
              <li>
                <strong>JWT 기반 인증</strong>: 사용자 인증을 위한 JWT 토큰
                시스템을 구현합니다.
              </li>
            </ul>

            <h3>데이터 무결성</h3>
            <ul>
              <li>
                <strong>트랜잭션 관리</strong>: ACID 속성을 보장하는 트랜잭션
                관리
              </li>
              <li>
                <strong>참조 무결성</strong>: 외래키 제약조건을 통한 데이터
                일관성 보장
              </li>
              <li><strong>검증 로직</strong>: 비즈니스 룰 기반 데이터 검증</li>
            </ul>

            <h3>시스템 안정성</h3>
            <ul>
              <li>
                <strong>에러 처리</strong>: 포괄적인 예외 처리 및 복구 메커니즘
              </li>
              <li><strong>로깅</strong>: 상세한 시스템 로그 및 모니터링</li>
              <li><strong>백업</strong>: 정기적인 데이터 백업 및 복구</li>
            </ul>
          </section>

          <section class="content-section">
            <h2>📈 성능 최적화</h2>

            <h3>데이터베이스 최적화</h3>
            <ul>
              <li>
                <strong>인덱스 전략</strong>: 효율적인 쿼리를 위한 인덱스 설계
              </li>
              <li>
                <strong>쿼리 최적화</strong>: N+1 문제 해결 및 Fetch Join 활용
              </li>
              <li>
                <strong>캐싱</strong>: Redis를 통한 자주 조회되는 데이터 캐싱
              </li>
            </ul>

            <h3>API 성능</h3>
            <ul>
              <li>
                <strong>페이지네이션</strong>: 대용량 데이터 조회 시
                페이지네이션 적용
              </li>
              <li>
                <strong>배치 처리</strong>: 대량 데이터 처리 시 배치 단위 처리
              </li>
              <li>
                <strong>비동기 처리</strong>: 시간이 오래 걸리는 작업의 비동기
                처리
              </li>
            </ul>
          </section>

          <section class="content-section">
            <h2>🚀 확장 가능성</h2>

            <h3>기능 확장</h3>
            <ul>
              <li>
                <strong>실시간 데이터</strong>: WebSocket 연결 안정화 후 실시간
                시세 업데이트
              </li>
              <li>
                <strong>주문 매칭 엔진</strong>: 가격-시간 우선순위 기반 자동
                매칭 시스템
              </li>
              <li>
                <strong>모바일 앱</strong>: React Native 기반 모바일
                애플리케이션
              </li>
              <li>
                <strong>웹 대시보드</strong>: React 기반 실시간 포트폴리오
                대시보드
              </li>
            </ul>

            <h3>분석 기능</h3>
            <ul>
              <li><strong>AI 분석</strong>: 머신러닝 기반 투자 패턴 분석</li>
              <li><strong>예측 모델</strong>: 주가 예측 및 투자 추천 시스템</li>
              <li>
                <strong>리스크 관리</strong>: VaR, 스트레스 테스트 등 리스크
                분석
              </li>
            </ul>

            <h3>서비스 확장</h3>
            <ul>
              <li>
                <strong>다중 시장</strong>: 해외 주식, 채권, ETF 등 추가 시장
              </li>
              <li><strong>소셜 기능</strong>: 투자 성과 공유 및 커뮤니티</li>
              <li><strong>교육 플랫폼</strong>: 투자 교육 및 시뮬레이션</li>
            </ul>

            <h3>기술 확장</h3>
            <ul>
              <li>
                <strong>마이크로서비스</strong>: 도메인별 마이크로서비스
                아키텍처
              </li>
              <li>
                <strong>클라우드 배포</strong>: AWS/Azure 기반 클라우드 인프라
              </li>
              <li><strong>DevOps</strong>: CI/CD 파이프라인 및 자동화</li>
            </ul>
          </section>
        </article>

        <!-- Post Navigation -->
        <nav class="post-navigation">
          <div class="nav-links">
            <a href="/architecture" class="nav-link prev">
              <i class="fas fa-arrow-left"></i>
              <span>아키텍처 카테고리로 돌아가기</span>
            </a>
            <a href="/posts/technology-stack.html" class="nav-link next">
              <span>다음: 기술 스택 분석</span>
              <i class="fas fa-arrow-right"></i>
            </a>
          </div>
        </nav>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-brand">
            <i class="fas fa-rocket"></i>
            <span>Motoo Tech Blog</span>
          </div>
          <div class="footer-links">
            <a href="https://github.com/mo2-motoo" target="_blank">
              <i class="fab fa-github"></i>
            </a>
            <a href="mailto:team@motoo.com">
              <i class="fas fa-envelope"></i>
            </a>
          </div>
        </div>
        <div class="footer-bottom">
          <p>&copy; 2025 Motoo Team. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="../assets/js/main.js"></script>
  </body>
</html>
